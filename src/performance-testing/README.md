# Performance Testing

Contains scripts and files for generating test data and testing code speed.

## File Structure

For three diagrams (Python Tutor, Ohm Parser, and Insertion Sort), we measured how render time of the diagram scaled with the size/number of sub-elements in the diagram. Performance testing scripts for these 3 diagrams are in separate folders.

Inside each folder is an associated Python file, prefixed with `generate_`, which is used to generate a `.ts` file containing the requisite props for the diagram (with `Props` suffixed). The code for generating each diagram is in the `tsx` file in the folder, and the diagram component has been configured to take the props generated by the Python file as input.

## Running

In order to performance test the diagrams, there are a few steps to take:

1. Create an `App.tsx` file in `/public`. This can be done by duplicating the `App.template.tsx` file in the `/public` folder and renaming it to `App.tsx`.

2. Replace the following block of code in `App.tsx`

   ```js
   <Bluefish>
     Duplicate this file and name it `App.tsx` to use the dev playground!
   </Bluefish>
   ```

   with the name of the component that you are trying to test. The names of the components are as follows:

   - Insertion Sort: `<InsertionSortTest />`
   - Ohm Parser: `<OhmParserTest />`
   - Python Tutor: `<PythonTutorTest />`

3. Generate a props file for the diagram you are trying to test. This is done by downloading and running `python [the relevant script].py`. For example, for the Insertion Sort diagram, you would run download and run `python generate_insertion_sort.py`. Each script also has toggleable size parameters controlling the complexity of the rendered diagram.

4. Replace the `.ts` props file in the repository with the `.ts` props file generated by the python script.

5. [Optional] To find the number of nodes in the scenegraph of the diagram that you're generating, you should go into the relevant `.tsx` file and change the `debug={false}` parameter in to `debug={true}`. This will cause Bluefish to print out the total length of the scenegraph. After you find this number, to get more accurate performance results, make sure to change it back to `debug={false}`

6. Run `pnpm dev` to start a localhost server. Navigate to `http://localhost:3000/public/index.html` to see the rendered diagram. You should then be able to use browser tools or other means to measure the time it takes Bluefish to render the diagram.
